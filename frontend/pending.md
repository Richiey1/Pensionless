# Deadman Vault Frontend - Analysis & Requirements

## ğŸ“‹ Current State

### âœ… What's Already Built

**Tech Stack:**
- Next.js 16 (App Router)
- TypeScript
- Tailwind CSS v4
- Web3: wagmi v2, viem v2, Reown AppKit (WalletConnect)
- TanStack Query for state management

**Existing Components:**
- âœ… Header with wallet connection
- âœ… Hero section with call-to-action
- âœ… Tab navigation (Create, My Vaults, Claim)
- âœ… Basic UI components (Button, Card)
- âœ… Web3Provider setup
- âœ… Three main tabs:
  - CreateVaultTab
  - MyVaultsTab
  - ClaimTab

**Design System:**
- Blue & Mint Green color palette
- Modern, trustworthy aesthetic
- Responsive layout

### ğŸ“ Deployed Contracts (Base Mainnet)
```
Factory: 0x025800b47F319C87091b455814475c496DC72219
NFT:     0xc319b525592725194cA6254EE09866AA7b1bD5Ab
```

## ğŸ”§ What Needs to Be Done

### 1. Environment Configuration
- [x] Create `.env.local` file with: âœ…
  - [x] `NEXT_PUBLIC_REOWN_PROJECT_ID` (WalletConnect) âœ…
  - [x] Contract addresses (already in contracts.ts)
  - [x] Network configuration (already in wagmi.ts)

### 2. Contract Integration
- [x] Add contract ABIs to `lib/abi/` âœ…
  - [x] DeadmanVault.ts âœ…
  - [x] DeadmanVaultFactory.ts âœ…
  - [x] ProofOfClaimNFT.ts âœ…
- [x] Create `lib/contracts.ts` with addresses and configs âœ…
- [x] Implement custom hooks in `hooks/`: âœ…
  - [x] `useFactory.ts` - Factory contract interactions âœ…
  - [x] `useDeadmanVault.ts` - Vault contract interactions âœ…
  - [x] `useNFT.ts` - NFT contract interactions âœ…

### 3. Core Features to Implement

#### Create Vault Tab
- [x] Form to create new vault: âœ…
  - [x] Beneficiary address input âœ…
  - [x] Timeout period selector (presets: 1 week, 1 month, 3 months, 6 months, 1 year, custom) âœ…
  - [x] Optional initial deposit amount (removed - can deposit later) âœ…
- [x] Deploy vault via Factory contract âœ…
- [x] Show transaction status and confirmation âœ…
- [x] Display newly created vault address âœ…

#### My Vaults Tab
- [x] Fetch all vaults owned by connected wallet âœ…
- [x] Display vault cards showing: âœ…
  - [x] Vault address âœ…
  - [x] Balance âœ…
  - [x] Beneficiary âœ…
  - [x] Last ping time âœ…
  - [x] Timeout status (active/expired) âœ…
  - [x] Time until timeout âœ…
- [x] Vault actions: âœ…
  - [x] Deposit ETH âœ…
  - [x] Withdraw ETH âœ…
  - [x] Ping (reset timer) âœ…
  - [x] Update beneficiary âœ…
  - [x] Update timeout âœ…
- [x] Real-time countdown timers âœ…
- [x] Empty state when no vaults âœ…

#### Claim Tab
- [x] Fetch vaults where user is beneficiary âœ…
- [x] Show claimable vaults with: âœ…
  - [x] Owner address âœ…
  - [x] Balance âœ…
  - [x] Timeout status âœ…
  - [x] Countdown to claim eligibility âœ…
- [x] Claim functionality: âœ…
  - [x] Check if timeout reached âœ…
  - [x] Claim all funds âœ…
  - [x] Mint proof-of-claim NFT âœ…
- [x] Show claim history (transaction links) âœ…
- [x] Empty state when no claimable vaults âœ…

### 4. UI/UX Enhancements
- [x] Loading states for all async operations âœ…
- [x] Error handling and user-friendly error messages âœ…
- [x] Success notifications âœ…
- [x] Transaction pending indicators âœ…
- [x] Responsive design for mobile âœ…
- [x] Tooltips for complex features âœ…
- [x] Input validation âœ…

### 5. Smart Contract Setup
âš ï¸ **CRITICAL:** Before frontend works fully:
- [ ] Authorize Factory to mint NFTs:
  - Go to NFT contract on BaseScan
  - Call `setAuthorizedMinter(0x025800b47F319C87091b455814475c496DC72219, true)`
  - This allows Factory to mint certificates when beneficiaries claim

### 6. Testing & Validation
- [ ] Test wallet connection
- [ ] Test vault creation
- [ ] Test deposit/withdraw
- [ ] Test ping functionality
- [ ] Test beneficiary claim
- [ ] Test NFT minting
- [ ] Cross-browser testing
- [ ] Mobile responsiveness

## ğŸ¯ Priority Order

### Phase 1: Foundation (Critical)
1. [x] Set up environment variables âœ…
2. [x] Add contract ABIs âœ…
3. [x] Create contract configuration file âœ…
4. [x] Create constants.ts with contract addresses âœ…
5. [ ] Authorize Factory to mint NFTs

### Phase 2: Core Functionality
1. [x] Implement useFactory hook âœ…
2. [x] Implement useDeadmanVault hook âœ…
3. [x] Implement useNFT hook âœ…
4. [x] Implement Create Vault feature âœ…
5. [x] Implement My Vaults display âœ…
6. [x] Implement basic vault actions (deposit, withdraw, ping) âœ…

### Phase 3: Advanced Features
1. [x] Implement Claim functionality âœ…
2. [x] Implement NFT minting âœ…
3. [x] Add real-time countdowns âœ…
4. [x] Add vault management (update beneficiary/timeout) âœ…

### Phase 4: Polish
1. [x] Error handling âœ…
2. [x] Loading states âœ…
3. [x] Success notifications âœ…
4. [x] Mobile optimization âœ…
5. [ ] Final testing

## ğŸ“ Key Files to Create/Update

### To Create:
- [x] `lib/abi/DeadmanVault.ts` âœ…
- [x] `lib/abi/DeadmanVaultFactory.ts` âœ…
- [x] `lib/abi/ProofOfClaimNFT.ts` âœ…
- [x] `lib/contracts.ts` âœ…
- [x] `config/constants.ts` âœ…
- [x] `hooks/useFactory.ts` âœ…
- [x] `hooks/useDeadmanVault.ts` âœ…
- [x] `hooks/useNFT.ts` âœ…
- [x] `.env.local` âœ…

### To Update:
- [x] `components/vault/CreateVaultTab.tsx` - Implement form and logic âœ…
- [x] `components/vault/MyVaultsTab.tsx` - Implement vault list and actions âœ…
- [x] `components/vault/ClaimTab.tsx` - Implement claim interface âœ…
- [x] `config/wagmi.ts` - Network configuration âœ…

## ğŸš€ Getting Started

1. [x] Check if dev server is running âœ… (it is)
2. [x] Create `.env.local` with required variables âœ…
3. [x] Add contract ABIs from the smart contract project âœ…
4. [ ] Authorize Factory to mint NFTs on BaseScan
5. [x] Start implementing hooks for contract interactions âœ…
6. [x] Build out tab components one by one âœ…

## ğŸ’¡ Notes

- The frontend is well-structured and ready for implementation
- Main work is connecting the UI to smart contracts
- Focus on user experience - make complex blockchain operations simple
- Test thoroughly on Base Mainnet before launch
